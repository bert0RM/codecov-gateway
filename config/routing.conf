 location / {
    proxy_redirect off;
    proxy_pass ${CODECOV_WEB_SCHEME}://legacy;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header Host ${CODECOV_WEB_HOST_HEADER};
    proxy_buffer_size 128k;
    proxy_buffers 4 256k;
    proxy_busy_buffers_size 256k;
    add_header X-Codecov-WEB true always;
}
location /v2/api {
    proxy_redirect /v2/api /;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location /validate {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location /internal {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location /health {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location /upload/v2 {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location /upload/v4 {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location /profiling {
    proxy_redirect off;
    proxy_pass ${CODECOV_RTI_SCHEME}://rti;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_RTI_HOST_HEADER};
    add_header X-Codecov-RTI true always;
}
location ~* /.*/.*/.*/branch/(?P<branch>.+)/(graph|graphs)/badge.svg {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location ~* /.*/.*/.*/(graph|graphs)/badge.svg {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location ~* /.*/.*/.*/pull/(?P<pullid>[^/]+)/(graph|graphs)/(?P<graph>tree|icicle|sunburst|commits).svg {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location ~* /.*/.*/.*/branch/(?P<branch>[^/].+)/(graph|graphs)/(?P<graph>tree|icicle|sunburst|commits).svg {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location ~* /.*/.*/.*/(graph|graphs)/(?P<graph>tree|icicle|sunburst|commits).svg {
    proxy_redirect off;
    proxy_pass ${CODECOV_API_SCHEME}://api;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_API_HOST_HEADER};
    add_header X-Codecov-API true always;
}
location /uploader {
    proxy_redirect off;
    proxy_pass ${CODECOV_WEB_SCHEME}://legacy;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_WEB_HOST_HEADER};
    add_header X-Codecov-WEB true always;
}
location ~ ^/uploader/.*/codecov.*$ {
    proxy_redirect off;
    proxy_pass ${CODECOV_WEB_SCHEME}://legacy;
    proxy_set_header X-Forwarded-For ${DOLLAR}proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto ${DOLLAR}scheme;
    proxy_set_header Referer ${DOLLAR}http_referer;
    proxy_set_header Host ${CODECOV_WEB_HOST_HEADER};
    add_header X-Codecov-WEB true always;
}
location /gateway_version {
    return 200 '${BUILD_VERSION} ${BUILD_ID}';
    add_header Content-Type text/plain;
}
location /nginx_status {
    stub_status;
    access_log off;
    allow 127.0.0.1;
    deny all;
}